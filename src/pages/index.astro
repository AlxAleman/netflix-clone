---
import Layout from '../layouts/Layout.astro';
import NetflixApp from '../components/NetflixApp';
import { tmdbService } from '../services/tmdb';

// Obtener datos de las películas
const trending = await tmdbService.getTrending();
const popular = await tmdbService.getPopular();
const topRated = await tmdbService.getTopRated();
const nowPlaying = await tmdbService.getNowPlaying();
const upcoming = await tmdbService.getUpcoming();

// Seleccionar película para el hero (primera película trending)
const heroMovie = trending[0];
---

<Layout title="Netflix Clone">
  <main>
    <NetflixApp
      client:load
      heroMovie={heroMovie}
      trending={trending}
      popular={popular}
      topRated={topRated}
      nowPlaying={nowPlaying}
      upcoming={upcoming}
    />
  </main>
</Layout>
