---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header';
import Hero from '../components/Hero';
import MovieRow from '../components/MovieRow';
import { tmdbService } from '../services/tmdb';

// Get movie data
const [trending, popular, topRated, nowPlaying, upcoming] = await Promise.all([
  tmdbService.getTrending(),
  tmdbService.getPopular(),
  tmdbService.getTopRated(),
  tmdbService.getNowPlaying(),
  tmdbService.getUpcoming(),
]);

// Featured movie for hero (first trending movie)
const heroMovie = trending[0];
---

<Layout title="Netflix Clone - Portfolio Demo">
  <Header client:load />
  
  <main>
    <!-- Hero Section -->
    <Hero 
      client:load
      movie={heroMovie}
    />
    
    <!-- Movie Rows -->
    <section class="relative -mt-40 z-20 bg-gradient-to-t from-black via-black/95 to-transparent pt-20">
      <div class="space-y-12">
        <MovieRow
          client:load
          title="Trending Now"
          movies={trending}
        />
        
        <MovieRow
          client:load
          title="Popular"
          movies={popular}
        />
        
        <MovieRow
          client:load
          title="Top Rated"
          movies={topRated}
        />
        
        <MovieRow
          client:load
          title="Now Playing"
          movies={nowPlaying}
        />
        
        <MovieRow
          client:load
          title="Coming Soon"
          movies={upcoming}
        />
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="bg-black text-gray-400 px-4 md:px-16 py-16 mt-16">
    <div class="max-w-6xl mx-auto">
      <p class="text-center text-sm">
        This is a demo project created for portfolio purposes. 
        Data provided by <a href="https://www.themoviedb.org/" target="_blank" class="text-red-600 hover:underline">The Movie Database (TMDB)</a>.
      </p>
    </div>
  </footer>
</Layout>

<style>
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
</style>